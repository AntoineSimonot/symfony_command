{{ form_start(form) }}

    <div class="products" data-index="{{ form.products|length > 0 ? form.products|last.vars.name + 1 : 0 }}" data-prototype="{{ form_widget(form.products.vars.prototype)|e('html_attr') }}"></div>

    <button type="button" class="add_product_link btn btn-secondary mb-3" data-collection-holder-class="products">Add a product</button>

    <div class="payments" data-index="{{ form.payments|length > 0 ? form.payments|last.vars.name + 1 : 0 }}" data-prototype="{{ form_widget(form.payments.vars.prototype)|e('html_attr') }}"></div>

    <button type="button" class="add_payment_link btn btn-info mb-3" data-collection-holder-class="payments">Add a payment</button>

{{ form_end(form) }}